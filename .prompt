#!/bin/bash --

_='
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ 
\\                                                           \\ 
\\                                                           \\ 
\\ file: .prompt [ sourced via .bashrc ]                     \\ 
\\                                                __         \\ 
\\      by proxa                                 /\ \__      \\  
\\         _____   _ __   ___     ___ ___   _____\ \  _\     \\  
\\        /\ \__ \/\  __\/ __ \ /  __  __ \/\  __ \ \ \/     \\ 
\\      __\ \ \L\ \ \ \//\ \L\ \/\ \/\ \/\ \ \ \L\ \ \ \_    \\
\\     /\_\\ \  __/\ \_\\ \____/\ \_\ \_\ \_\ \  __/\ \__\   \\
\\     \/_/ \ \ \/  \/_/ \/___/  \/_/\/_/\/_/\ \ \/  \/__/   \\ 
\\           \ \_\                            \ \_\          \\
\\            \/_/                             \/_/          \\
\\                                                           \\
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ 
'

#-----------
# Variables
#-----------
name=''
host=''
PS1_DEBUG=0
PS2="> "
PS3="+ "
PS4=""
reset='\[\e[0m\]'
red='\[\e[31m\]'
green='\[\e[32m\]'
ired='\[\e[91m\]'
igreen='\[\e[92m\]'
purple='\[\e[35m\]'
ipurple='\[\e[95m\]'
yellow='\[\e[93m\]'

#------------------------------
# Use custom name if it exists
#------------------------------
function get_username {
  [[ -z $name ]] && name="\u"
}

#------------------------------
# Use custom host if it exists
#------------------------------
function get_hostname {
  [[ -z $host ]] && host="\h"
}

#--------------
# Return value
#--------------
function get_ret_val {
  if [[ "$?" == 0 ]];then
    RET=$green
  else
    RET=$iyellow
  fi
  assemble
}

#-----------
# Debugging
#-----------
function debug {
  [[ $PS1_DEBUG == 1 ]] && echo $PS1
}

#--------------------
# Set prompt command
#--------------------
PROMPT_COMMAND='get_ret_val'

#----------
# Assemble
#----------
function assemble {
  if [ $EUID -eq 0 ];then
    PS1="$red[root] \w${yellow} ${RET}\\\$ $reset"
  else
    PS1="$green[$name.$host] \w${yellow} ${RET}\\\$ $reset"
  fi
}

#------
# Main
#------
get_username
get_hostname
assemble
unset _

# vim: set ft=sh :
