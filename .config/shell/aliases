# vim: set ft:sh

EMERGE_BASE_ARGS='sudo emerge --ask --alert'
TASK_BASE='task project.not:maybesomeday'

alias dmesg='dmesg --color=always'
alias dot="cd ~/code/dotfiles"
alias emerge="${EMERGE_BASE_ARGS}"
alias esync="${EMERGE_BASE_ARGS} --sync"
alias feh="feh --conversion-timeout 10 -Gd --draw-tinted --edit -."
alias grep='grep --color=auto'
alias history='history 1' # just show me all of it
alias imgur=imgurbash2
alias journal='sudo journalctl -xb --no-hostname -e'
alias less='less -r' # enable color
alias linux='cd /usr/src/linux'
alias ls='ls --color=always -p --human-readable --group-directories-first'
alias mutt='neomutt'
alias mv='mv -i'
alias nudworld="${EMERGE_BASE_ARGS} -NuD @world"
alias otpadd="zbarcam -q --raw --oneshot /dev/video4 | pass otp insert"
alias pm='pulsemixer'
alias projects='task projects'
alias scrot='maim -s -u | xclip -selection clipboard -t image/png -i'
alias sz="source ${XDG_CONFIG_HOME}/zsh/.zshrc"
alias sp="source ${XDG_CONFIG_HOME}/zsh/.zprofile"
alias sa="source ${XDG_CONFIG_HOME}/shell/aliases"
alias systemctl='systemctl --user' # the way it should be
alias tmux="tmux -f ${XDG_CONFIG_HOME}/tmux/tmux.conf"
alias tree='tree -C'
alias t="clear;${TASK_BASE}"
alias tl='task list'
alias ta='task active'
alias tt='clear && task list limit:10'
alias vifm='vifm .' # start vifm in cwd
alias vim='nvim'
alias vu="sudo vim /etc/portage/package.use/package.use"
alias vuu="sudo vim /etc/portage/make.conf"
alias wiki='vim -c VimwikiIndex'
alias xlog='less ${XDG_DATA_HOME}/xorg/Xorg.0.log'
alias z='zathura -c ${XDG_CONFIG_HOME}/zathura/light --fork'
alias zl='zathura -c ${XDG_CONFIG_HOME}/zathura/light --fork'
alias zathura='zathura -c ${XDG_CONFIG_HOME}/zathura/light --fork'
alias zd='zathura --fork'

# mnemonic map
declare -A KEYMAP=( ["va"]="${XDG_CONFIG_HOME}/shell/aliases"
                    ["vb"]="${XDG_CONFIG_HOME}/xmobar/xmobarr"
                    ["vd"]="${HOME}/.Xdefaults"
                    ["vn"]="${XDG_CONFIG_HOME}/newsboat/config"
                    ["vm"]="${XDG_CONFIG_HOME}/neomutt/neomuttrc"
                    ["vp"]="${ZDOTDIR}/.zprofile"
                    ["vq"]="${XDG_CONFIG_HOME}/qutebrowser/config.py"
                    ["vt"]="${XDG_CONFIG_HOME}/task/taskrc"
                    ["vv"]="${XDG_CONFIG_HOME}/nvim/init.vim"
                    ["vx"]="${XDG_CONFIG_HOME}/xmonad/xmonad.hs"
                    ["vy"]="${XDG_CONFIG_HOME}/alacritty/alacritty.yml"
                    ["vz"]="${ZDOTDIR}/.zshrc"
                 )

for key value in "${(kv)KEYMAP[@]}"; do
  alias "$key"="nvim $value"
done

# $1 markdown file
function mkpdf() {
  pandoc -o out.pdf -f markdown -t pdf "$1"
}

# quick ignore files
# $1 file(s) to ignore
function ignore() {
  echo "$1" >> .gitignore
}

# grep history easier
# $1 search string
function hgrep() {
  query="$@"
  fc -l 1 | grep "${query}"
}

# modify task
# $1 task id
# $2 modification
function mod() {
  task $1 mod "$2"
}

function taskclear() {
   clear
   "${TASK_BASE}"
}

# start a task
# $1 task id
function start() {
  task $1 start
  taskclear
}

# stop a task
# $1 task id
function stop() {
  task $1 stop
  taskclear
}

# add a task
# $@ everything else
function add() {
  task add "$@"
  clear;task
}

# complete a task
# $1 task id
function complete() {
  task $1 done
  taskclear
}

# complete a task
# $1 task id
function del() {
  task $1 del
  taskclear
}

# annotate a task
# $1 task id
function annotate() {
  task $1 annotate "$2"
  taskclear
}

# move a task to maybesomeday
# $1 task to move
function maybesomeday() {
  task $1 mod project:maybesomeday
  taskclear
}

# move a task to maybesomeday
# $1 task to move
function waitingfor() {
  task $1 mod project:waitingfor
  taskclear
}

# switch task context
# $1 context to move to
function context() {
  task @ $1
  taskclear
}

